import{r as a,j as e}from"./index-94dceae6.js";import{G as n}from"./iconBase-5d1ce741.js";function V(s){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m21.426 11.095-17-8A.999.999 0 0 0 3.03 4.242L4.969 12 3.03 19.758a.998.998 0 0 0 1.396 1.147l17-8a1 1 0 0 0 0-1.81zM5.481 18.197l.839-3.357L12 12 6.32 9.16l-.839-3.357L18.651 12l-13.17 6.197z"}}]})(s)}function D(s){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3zm9 11v-1a7 7 0 0 0-7-7h-4a7 7 0 0 0-7 7v1h2v-1a5 5 0 0 1 5-5h4a5 5 0 0 1 5 5v1z"}}]})(s)}function T(s){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.579 2 2 6.579 2 12s4.579 10 10 10 10-4.579 10-10S17.421 2 12 2zm0 5c1.727 0 3 1.272 3 3s-1.273 3-3 3c-1.726 0-3-1.272-3-3s1.274-3 3-3zm-5.106 9.772c.897-1.32 2.393-2.2 4.106-2.2h2c1.714 0 3.209.88 4.106 2.2C15.828 18.14 14.015 19 12 19s-3.828-.86-5.106-2.228z"}}]})(s)}function H(s){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M24 0v24H0V0h24z",opacity:".87"}},{tag:"path",attr:{d:"M14 7l-5 5 5 5V7z"}}]})(s)}function _(s){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M10 17l5-5-5-5v10z"}}]})(s)}function J(){const[s,u]=a.useState(""),[k,m]=a.useState([]),[i,h]=a.useState(!1),[p,l]=a.useState(""),[x,g]=a.useState(!1),o=a.useRef(null),[v,M]=a.useState("gpt-3.5-turbo"),[j,F]=a.useState(1),[f,L]=a.useState(100),[b,B]=a.useState(1),[y,E]=a.useState(0),[S,O]=a.useState(0),N=a.useCallback(()=>{g(t=>!t)},[]),R=()=>{window.location.href="/admin/dashboard"},q=async t=>{var C,w,z,P;if(t.preventDefault(),!s)return;h(!0),l("");const c={role:"user",content:s};m(r=>[...r,c]),(w=(C=o.current)==null?void 0:C.lastElementChild)==null||w.scrollIntoView({behavior:"smooth"});const I={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:s}],metadata:{user:"Web Client",env:"production",model:v,temperature:j,max_tokens:f,top_p:b,frequency_penalty:y,presence_penalty:S}})};try{const r=await fetch("https://truefoundry-0-0-0-release.onrender.com/openai",I);if(r.status===429){l("Too many requests, please try again later.");return}const d=await r.json();if(d.error)l(d.error.message);else{const A=d.choices[0].message;m(G=>[...G,A]),u(""),(P=(z=o.current)==null?void 0:z.lastElementChild)==null||P.scrollIntoView({behavior:"smooth"})}}catch(r){l(r.message),console.error(r)}finally{h(!1)}};return a.useLayoutEffect(()=>{const t=()=>{g(window.innerWidth<=640)};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container",children:[e.jsxs("section",{className:`sidebar ${x?"open":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx(D,{size:20}),e.jsx("button",{onClick:R,children:"GO TO DASHBOARD"})]}),e.jsxs("div",{className:"model-select",children:[e.jsx("label",{htmlFor:"model-select",children:"Select Model:"}),e.jsxs("select",{id:"model-select",value:v,onChange:t=>M(t.target.value),children:[e.jsx("option",{value:"gpt-3.5-turbo",children:"gpt-3.5-turbo"}),e.jsx("option",{value:"gpt-3.5-turbo-1106",children:"gpt-3.5-turbo-1106"}),e.jsx("option",{value:"gpt-3.5-turbo-0613",children:"gpt-3.5-turbo-0613"}),e.jsx("option",{value:"gpt-3.5-turbo-0301",children:"gpt-3.5-turbo-0301"}),e.jsx("option",{value:"gpt-3.5-turbo-0125",children:"gpt-3.5-turbo-0125"}),e.jsx("option",{value:"gpt-3.5-turbo-16k",children:"gpt-3.5-turbo-16k"}),e.jsx("option",{value:"gpt-3.5-turbo-16k-0613",children:"gpt-3.5-turbo-16k-0613"})]})]}),e.jsxs("div",{className:"model-select-filters",children:[e.jsx("div",{className:"filter-item",children:e.jsx("label",{htmlFor:"temperature",children:"Temperature:"})}),e.jsx("div",{className:"filter-item",children:e.jsx("input",{type:"number",id:"temperature",placeholder:"0.00 - 1.00",min:"0",max:"1",step:"0.01",value:j,onChange:t=>F(parseFloat(t.target.value))})}),e.jsx("div",{className:"filter-item",children:e.jsx("label",{htmlFor:"maxTokens",children:"Max Tokens:"})}),e.jsx("div",{className:"filter-item",children:e.jsx("input",{type:"number",id:"maxTokens",placeholder:"1 - 4096",min:"1",max:"4096",value:f,onChange:t=>L(parseInt(t.target.value))})}),e.jsx("div",{className:"filter-item",children:e.jsx("label",{htmlFor:"topP",children:"Top P:"})}),e.jsx("div",{className:"filter-item",children:e.jsx("input",{type:"number",id:"topP",placeholder:"0.00 - 1.00",min:"0",max:"1",step:"0.01",value:b,onChange:t=>B(parseFloat(t.target.value))})}),e.jsx("div",{className:"filter-item",children:e.jsx("label",{htmlFor:"frequencyPenalty",children:"Frequency Penalty:"})}),e.jsx("div",{className:"filter-item",children:e.jsx("input",{type:"number",id:"frequencyPenalty",placeholder:"0.00 - 1.00",min:"0",max:"1",step:"0.01",value:y,onChange:t=>E(parseFloat(t.target.value))})}),e.jsx("div",{className:"filter-item",children:e.jsx("label",{htmlFor:"presencePenalty",children:"Presence Penalty:"})}),e.jsx("div",{className:"filter-item",children:e.jsx("input",{type:"number",id:"presencePenalty",placeholder:"0.00 - 1.00",min:"0",max:"1",step:"0.01",value:S,onChange:t=>O(parseFloat(t.target.value))})})]})]}),e.jsxs("section",{className:"main",children:[x?e.jsx(_,{className:"burger",size:28.8,onClick:N}):e.jsx(H,{className:"burger",size:28.8,onClick:N}),e.jsx("div",{className:"main-header",children:e.jsx("ul",{children:k.map((t,c)=>e.jsxs("li",{ref:o,children:[t.role==="user"?e.jsx(T,{size:28.8}):e.jsx(T,{size:28.8}),e.jsxs("div",{children:[e.jsx("p",{className:"role-title",children:t.role==="user"?"You":"ChatGPT"}),e.jsx("p",{children:t.content})]})]},c))})}),e.jsxs("div",{className:"main-bottom",children:[p&&e.jsx("p",{className:"errorText",children:p}),e.jsxs("form",{className:"form-container",onSubmit:q,children:[e.jsx("input",{type:"text",placeholder:"Send a message.",spellCheck:"false",value:i?"Processing...":s,onChange:t=>u(t.target.value),readOnly:i}),!i&&e.jsx("button",{type:"submit",children:e.jsx(V,{size:20})})]}),e.jsx("p",{children:"ChatGPT can make mistakes. Consider checking important information."})]})]})]})})}export{J as default};
