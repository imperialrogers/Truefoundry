import{j as e,r as l}from"./index-94dceae6.js";import{A as C}from"./AdminSidebar-b01626fa.js";import{L as i}from"./Charts-c0264ed6.js";/* empty css                  */import"./iconBase-5d1ce741.js";function v(){const a=Math.floor(Math.random()*360),n=Math.floor(Math.random()*21)+40,r=Math.floor(Math.random()*21)+40;return`hsl(${a},${n}%,${r}%)`}const M=({dataSets:a,models:n})=>{const r=Math.max(...a.map(o=>o.length)),c=a.map(o=>{const s=r-o.length;return[...o,...Array(s).fill(0)]});return e.jsx("div",{className:"multi-kpi-chart-container",children:c.map((o,s)=>e.jsxs("div",{className:"chart-item",children:[e.jsx(i,{data:o,label:n[s],backgroundColor:a[s].backgroundColor,borderColor:v(),labels:a[s].labels}),e.jsx("h2",{children:n[s]})]},s))})},p=["gpt-3.5-turbo","gpt-3.5-turbo-1106","gpt-3.5-turbo-0613","gpt-3.5-turbo-0301","gpt-3.5-turbo-0125","gpt-3.5-turbo-16k","gpt-3.5-turbo-16k-0613"],E=()=>{const[a,n]=l.useState("month"),[r,c]=l.useState([]),[o,s]=l.useState([]),h=["Jan","Feb","March","April","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];l.useEffect(()=>{g()},[a]);const g=async()=>{try{const t=await fetch(`https://truefoundry-0-0-0-release.onrender.com/dashboard/line-data?timeRange=${a}`);if(!t.ok)throw new Error("Failed to fetch data");const j=await t.json();c(j);const x=p.map(async u=>{const m=await fetch(`https://truefoundry-0-0-0-release.onrender.com/dashboard/model-dist?timeRange=${a}&model=${u}`);if(!m.ok)throw new Error(`Failed to fetch data for model ${u}`);return(await m.json()).map(f=>parseInt(f.average_latency))}),y=await Promise.all(x);s(y)}catch(t){console.error("Error fetching data:",t)}},d=()=>{switch(a){case"month":return r.map(t=>`${h[t.group_key-1]}`);case"year":return r.map(t=>t.group_key.toString());case"hour":return r.map(t=>`${t.group_key}:00`);case"day":return r.map(t=>`Day ${t.group_key}`);case"quarter":return r.map(t=>`Q${t.group_key}`);default:return[]}},b=t=>{n(t.target.value)};return e.jsxs("div",{className:"admin-container",children:[e.jsx(C,{}),e.jsxs("main",{className:"chart-container",children:[e.jsx("h1",{children:"Time Series Charts"}),e.jsx("label",{htmlFor:"timeRange",className:"select-label",children:"Select Time Range:"}),e.jsxs("select",{id:"timeRange",className:"select-dropdown",value:a,onChange:b,children:[e.jsx("option",{value:"month",children:"Monthly"}),e.jsx("option",{value:"year",children:"Yearly"}),e.jsx("option",{value:"hour",children:"Hourly"}),e.jsx("option",{value:"day",children:"Daily"}),e.jsx("option",{value:"quarter",children:"Quarterly"})]}),e.jsxs("section",{children:[e.jsx(i,{data:r.map(t=>parseInt(t.total_active_users)),label:"Users",borderColor:"rgb(53, 162, 255)",backgroundColor:"rgba(53, 162, 255,0.5)",labels:d()}),e.jsxs("h2",{children:[a,"ly Active Users(MAU)"]})]}),e.jsxs("section",{children:[e.jsx(i,{data:r.map(t=>parseInt(t.api_requests)),label:"Requests",backgroundColor:"hsla(269,80%,40%,0.4)",borderColor:"hsl(269,80%,40%)",labels:d()}),e.jsxs("h2",{children:[a,"ly API Requests"]})]}),e.jsx("div",{children:e.jsx(M,{dataSets:o,models:p})}),e.jsx("section",{children:e.jsx("h2",{children:"MODELWISE LATENCY"})})]})]})};export{E as default};
