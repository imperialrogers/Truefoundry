import{r as o,j as r}from"./index-94dceae6.js";import{A as j}from"./AdminSidebar-b01626fa.js";import{P as l,D as h}from"./Charts-c0264ed6.js";/* empty css                  */import"./iconBase-5d1ce741.js";const f=["January","February","March","April","May","June","July","August","September","October","November","December"],R=()=>{const[c,u]=o.useState([]),[a,d]=o.useState("month"),[s,g]=o.useState(0);o.useEffect(()=>{(async()=>{try{const t=await fetch(`https://truefoundry-0-0-0-release.onrender.com/dashboard/percentages?timeRange=${a}&range=${s}`);if(!t.ok)throw new Error("Failed to fetch data");const n=await t.json();console.log(n),u(n)}catch(t){console.error("Error fetching data:",t)}})()},[a,s]);const p=e=>{d(e.target.value)},i=e=>{g(parseInt(e.target.value,10))},_=(e,t)=>{switch(t){case"month":return`${f[e-1]}`;case"quarter":return`Quarter ${e}`;case"year":return`Year ${e}`;case"hour":return`Hour ${e}`;case"day":return`Day ${e}`;default:return`${e}`}},b=()=>{const e=c.map(n=>n.timeRange);return[...new Set(e)]},x=c.filter(e=>e.timeRange===s);return r.jsxs("div",{className:"admin-container",children:[r.jsx(j,{}),r.jsxs("main",{className:"chart-container",children:[r.jsx("h1",{children:"PERCENTAGE DISTRIBUTIONS"}),r.jsx("label",{htmlFor:"groupBy",className:"select-label",children:"Select Time Range:"}),r.jsxs("select",{id:"groupBy",className:"select-dropdown",value:a,onChange:p,children:[r.jsx("option",{value:"month",children:"Monthly"}),r.jsx("option",{value:"quarter",children:"Quarterly"}),r.jsx("option",{value:"year",children:"Yearly"})]}),r.jsxs("label",{htmlFor:"range",className:"select-label",children:["Select ",a,":"]}),r.jsxs("select",{id:"range",className:"select-dropdown",value:s,onChange:i,children:[r.jsxs("option",{value:0,children:["Select ",a]}),b().map((e,t)=>r.jsx("option",{value:e,children:_(e,a)},t))]}),x.map((e,t)=>r.jsxs("section",{children:[r.jsx("div",{children:r.jsx(l,{labels:["SUCCESS","FAILURE"],data:[e.success_percentage,100-e.success_percentage],backgroundColor:["hsl(269,80%,40%)","rgb(53, 162, 255)"],offset:[0,80]})}),r.jsx("h2",{children:"API SUCCESS RATIO"}),r.jsx("div",{children:r.jsx(h,{labels:["PRODUCTION","DEVELOPMENT","TESTING","OTHERS"],data:[e.prod_env_percentage,e.dev_env_percentage,e.test_env_percentage,e.oth_env_percentage],backgroundColor:["hsl(110,80%,40%)","hsl(19,80%,40%)","hsl(69,80%,40%)","hsl(300,80%,40%)"],legends:!1,offset:[20,30,20,30,80]})}),r.jsx("h2",{children:"ENVIRONMENT DISTRIBUTION"}),r.jsx("div",{children:r.jsx(l,{labels:["gpt-3.5-turbo","gpt-3.5-turbo-1106","gpt-3.5-turbo-0613","gpt-3.5-turbo-0301","gpt-3.5-turbo-0125","gpt-3.5-turbo-16k","gpt-3.5-turbo-16k-0613"],data:[e.gpt_3_5_turbo_percentage,e.gpt_3_5_turbo_1106_percentage,e.gpt_3_5_turbo_0613_percentage,e.gpt_3_5_turbo_0301_percentage,e.gpt_3_5_turbo_0125_percentage,e.gpt_3_5_turbo_16k_percentage,e.gpt_3_5_turbo_16k_0613_percentage],backgroundColor:["hsl(10, 80%, 80%)","hsl(50, 70%, 70%)","hsl(110, 60%, 60%)","hsl(170, 50%, 50%)","hsl(210, 40%, 40%)","hsl(260, 30%, 30%)","hsl(310, 20%, 20%)"],offset:[0,0,50,0,0,0,0]})}),r.jsx("h2",{children:"MODEL DEMAND %"}),r.jsx("div",{children:r.jsx(h,{labels:["OPENAI","OTHERS"],data:[e.openai_engine_percentage,100-e.openai_engine_percentage],backgroundColor:["hsl(335, 100%, 38%)","hsl(44, 98%, 50%)"],offset:[0,80]})}),r.jsx("h2",{children:"ENGINE DEMAND"})]},t))]})]})};export{R as default};
